<?xml version="1.0" encoding="UTF-8" ?>  
<!DOCTYPE mapper PUBLIC "-//ibatis.apache.org//DTD Mapper 3.0//EN"      
 "http://ibatis.apache.org/dtd/ibatis-3-mapper.dtd">
<mapper namespace="cn.soa.examsystem.dao.UserManagementDao">
	<select id="findUserFunctionlByID" resultType="map" parameterType="string">
		select function_name,function_url,function_id from user_function  where ua_id=#{ua_id}
	</select>
	<select id="findOrganizationStructureByUserId" resultType="cn.soa.examsystem.entity.Tree" parameterType="string">
		select uos_id as id,user_father_id as pid,user_name as name from user_oaganization_stucture m start with m.uos_id=(select uos_id from user_info where user_id=#{user_id}) connect by m.user_father_id=prior m.uos_id order by pid desc
	</select>
	<select id="findNodeOrganizationByUosId" resultType="map" parameterType="string">
		select a1.uos_id,a1.user_name,a2.user_name as fater_name from user_oaganization_stucture a1,user_oaganization_stucture a2 where a1.uos_id=#{uos_id} and a2.uos_id=a1.user_father_id
	</select>
	<update id="updateNodeNameByUosId" parameterType="string">
		update user_oaganization_stucture set user_name=#{1} where uos_id=#{0}
	</update>
	<insert id="addNode">
		insert into user_oaganization_stucture values (#{0},#{1},#{2})
	</insert>
</mapper>












