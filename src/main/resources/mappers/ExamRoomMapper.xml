<?xml version="1.0" encoding="UTF-8" ?>  
<!DOCTYPE mapper PUBLIC "-//ibatis.apache.org//DTD Mapper 3.0//EN"      
 "http://ibatis.apache.org/dtd/ibatis-3-mapper.dtd">
<mapper namespace="cn.soa.examsystem.dao.ExamRoomDao">
	<select id="findAllExaminPaper" resultType="map">
		select * from (select * from (select rownum rn,EXAM_ID,EXAM_NAME from questionbank_examination_paper) 
		where rownum<![CDATA[<=]]>#{1}) where rn<![CDATA[>=]]>#{0}
	</select>
	<select id="findTotalCount" resultType="int">
		select count(*) from questionbank_examination_paper
	</select>
	<select id="findUserFunction" resultType="map">
		select function_name,function_url from user_function  where uf_id in (select uf_id from ua_uf_relation where ua_id=#{ua_id})
	</select>
	<insert id="addExamroom"
			   parameterType="cn.soa.examsystem.entity.Examroom">
		insert into
		examroom_info(examroom_id,examroom_create_time,examroom_create_person,examroom_begin_time,examroom_end_time,examroom_place,examroom_max_person,examroom_name,examroom_lock_status)
		values
		(#{examroom_id},to_date(#{examroom_create_time},'yyyy-MM-dd HH24:mi:ss'),#{examroom_create_person},to_date(#{examroom_begin_time},'yyyy-MM-dd HH24:mi:ss'),to_date(#{examroom_end_time},'yyyy-MM-dd HH24:mi:ss'),#{examroom_place},#{examroom_max_person},#{examroom_name},#{examroom_lock_status})
	</insert>
	<select id="findExamroomByName" resultType="string">
		select examroom_name from examroom_info where examroom_name=#{examroom_name}
	</select>
</mapper>












