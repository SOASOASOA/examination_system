<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>考场管理</title>
<style type="text/css">
html, body {
	height: 100%;
	background-color: #fff;
	position: relative;
}

#em_bt {
	position:absolute;
	right:100px;
	margin-top: 5px;
}

.layui-input-block {
	width: 500px;
}

#em_from {
	position:absolute;
	border-top:1.5px solid #C9C9C9;
	width: 100%;
	display: flex;
}

.layui-form {
	margin: auto;
}
.layui-input{
white-space : normal nowrap 
}
#em_from>.layui-form input{
	width: 500px;
}
.star{
	position: absolute;
	left:310px;
	color: red;
	font-size: 20px;
}
.layui-form-item{
	margin-top: 40px;
}
/*考试管理head高度*/
#em_head{
height: 50px;
}
</style>
</head>
<body>
	<div id="em_head">
	<button id="em_bt" class="layui-btn layui-btn-normal">
		<i class="layui-icon">&#xe608;</i>添加新考场
	</button>
	</div>
	<div id="em_from">
		<form class="layui-form" action="">
			<div class="layui-form-item">
				<label class="layui-form-label">考场名称:</label>
				<div class="layui-input-inline">
					<input type="text" name="examroom_name" required lay-verify="required" placeholder="请输入考场名称" class="layui-input">
				</div>
				 <div class="layui-form-mid layui-word-aux"><span class="star">*</span></div>
			</div>
			<div class="layui-form-item">
				<label class="layui-form-label">考生数量:</label>
				<div class="layui-input-inline">
					<input type="text" name="examroom_max_person" required lay-verify="examroom_max_person" placeholder="容纳考生数量" class="layui-input">
				</div>
				 <div class="layui-form-mid layui-word-aux"><span class="star">*</span></div>
			</div>
			<div class="layui-form-item">
				<label class="layui-form-label">开考时间:</label>
				<div class="layui-input-inline">
					<input type="text" name="examroom_begin_time" id="examroom_begin_time" lay-verify="date" placeholder="yyyy-MM-dd HH:mm:ss" autocomplete="off" class="layui-input">
				</div>
				 <div class="layui-form-mid layui-word-aux"><span class="star">*</span></div>
			</div>
			<div class="layui-form-item">
				<label class="layui-form-label">结束时间:</label>
				<div class="layui-input-inline">
					<input type="text" name="examroom_end_time" id="examroom_end_time" lay-verify="date" placeholder="yyyy-MM-dd HH:mm:ss" autocomplete="off" class="layui-input">
				</div>
				 <div class="layui-form-mid layui-word-aux"><span class="star">*</span></div>
			</div>
			<div class="layui-form-item">
				<label class="layui-form-label">考场地点:</label>
				<div class="layui-input-inline">
					<input type="text" name="examroom_place" lay-verify="required" placeholder="请输入考场地点" class="layui-input">
				</div>
				 <div class="layui-form-mid layui-word-aux"><span class="star">*</span></div>
			</div>
			<div class="layui-form-item">
				<label class="layui-form-label">锁定考场</label>
				<div class="layui-input-inline">
					<input type="checkbox" name="examroom_lock_status" title="是否锁定">
				</div>
			</div>
			<div class="layui-form-item">
				<div class="layui-input-block">
					<button class="layui-btn" lay-submit="" lay-filter="demo1">立即提交</button>
					<button type="reset" class="layui-btn layui-btn-primary">重置</button>
				</div>
			</div>
		</form>
	</div>
	<script type="text/javascript">
		layui.use(
			[ 'layer', 'form', 'table', 'element', 'laydate' ], function()
			{
				var layer = layui.layer, form = layui.form, table = layui.table, laydate = layui.laydate, $ = layui.$;

				$(function()
					{
						//封装表单数据的JSON对象
						jsonData =
							{};
						//添加开始时间控件
						laydate.render(
							{
								elem : '#examroom_begin_time',
								type : 'datetime',
								done : function(value, date, endDate)
									{
										jsonData.start_time = value.trim();
									}
							});
						//添加结束时间控件
						laydate.render(
							{
								elem : '#examroom_end_time',
								type : 'datetime',
								done : function(value, date, endDate)
									{
										jsonData.end_time = value.trim();
										/* console.log(endDate);
										if (typeof jsonData.start_time != 'undefined')
											{
												jsonData.end_time = value.trim();
												var start_time=new Date(jsonData.start_time);
												var end_time=new Date(jsonData.end_time);
												if((end_time.getTime()-start_time.getTime())<0){
													console.log(1);
													$('#examroom_end_time').val(null);
													return false;
												}
												
											} */
									}
							});
						//表单验证
						form.verify({
							  username: function(value, item){ //value：表单的值、item：表单的DOM对象
							    if(!new RegExp("^[a-zA-Z0-9_\u4e00-\u9fa5\\s·]+$").test(value)){
							      return '用户名不能有特殊字符';
							    }
							    if(/(^\_)|(\__)|(\_+$)/.test(value)){
							      return '用户名首尾不能出现下划线\'_\'';
							    }
							    if(/^\d+\d+\d$/.test(value)){
							      return '用户名不能全为数字';
							    }
							  },
							  //日期格式的验证
							  date: function(value, item){ //value：表单的值、item：表单的DOM对象 
								  if(value==''){
								      return '请输入日期';
								    }
								    if(!/^(?:19|20)[0-9][0-9]-(?:(?:0[1-9])|(?:1[0-2]))-(?:(?:[0-2][1-9])|(?:[1-3][0-1])) (?:(?:[0-2][0-3])|(?:[0-1][0-9])):[0-5][0-9]:[0-5][0-9]$/.test(value)){
								      return '日期格式不正确';
								    }
								  },
								  examroom_max_person: function(value, item){ //value：表单的值、item：表单的DOM对象
									    if(!/^[0-9]*$/.test(value)){
									      return '考生数量格式不正确';
									    }
									  }
							}); 
						//load时重新加载表单
						form.render();

					})
			});
	</script>
</body>


</html>